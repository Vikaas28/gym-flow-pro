# ğŸ“Š GYM Flow Pro - Architecture & Flow Diagrams

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    GYM Flow Pro Application                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              React Frontend (Vite + TypeScript)      â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Login/Signup Pages                               â”‚   â”‚
â”‚  â”‚  â€¢ Dashboard (Stats & Analytics)                    â”‚   â”‚
â”‚  â”‚  â€¢ Members Management (CRUD)                        â”‚   â”‚
â”‚  â”‚  â€¢ Attendance Tracking                              â”‚   â”‚
â”‚  â”‚  â€¢ Protected Routes (Auth Required)                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           Context API (State Management)             â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ AuthContext (User sessions, login/signup)       â”‚   â”‚
â”‚  â”‚  â€¢ MembersContext (Members data, attendance)       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            Supabase Client (SDK)                     â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚  â€¢ Authentication Service                            â”‚   â”‚
â”‚  â”‚  â€¢ Database Queries (REST API)                       â”‚   â”‚
â”‚  â”‚  â€¢ Real-time Subscriptions                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚    SUPABASE      â”‚
                 â”‚   (Backend-as-   â”‚
                 â”‚   a-Service)     â”‚
                 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”¤  PostgreSQL DB   â”‚
         â”‚       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
         â”‚       â”‚  â”‚  members   â”‚  â”‚
         â”‚       â”‚  â”‚  attendanceâ”‚  â”‚
         â”‚       â”‚  â”‚  users     â”‚  â”‚
         â”‚       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
         â”‚       â”‚                  â”‚
         â”‚       â”‚ â€¢ RLS Policies   â”‚
         â”‚       â”‚ â€¢ Auth System    â”‚
         â”‚       â”‚ â€¢ Indexes        â”‚
         â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€ Authentication
            Storage
            API Queries
```

## Authentication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           User Visits App                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Check Session       â”‚
        â”‚ (onAuthStateChange) â”‚
        â””â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
           â”‚                â”‚
      âœ… HAS SESSION    âŒ NO SESSION
           â”‚                â”‚
           â”‚          â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
           â”‚          â”‚ Redirect   â”‚
           â”‚          â”‚ to /login  â”‚
           â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â”‚  Show Dashboard           â”‚
      â”‚  (All Protected Routes)    â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Login/Signup Process

```
User Input
â”œâ”€â”€ Email & Password (Login)
â”‚   â””â”€â–º Call: supabase.auth.signInWithPassword()
â”‚       â”œâ”€â–º Success: Get JWT Token
â”‚       â”œâ”€â–º Token Stored in localStorage
â”‚       â””â”€â–º Session Auto-refreshed
â”‚
â””â”€â”€ Email, Password & Name (Signup)
    â””â”€â–º Call: supabase.auth.signUp()
        â”œâ”€â–º Create User in auth.users table
        â”œâ”€â–º Return JWT Token
        â””â”€â–º Auto-login user
```

## Database Schema

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        SUPABASE DATABASE         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   auth.users (Supabase)  â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ id (UUID)              â”‚   â”‚
â”‚  â”‚ â€¢ email                  â”‚   â”‚
â”‚  â”‚ â€¢ password (hashed)      â”‚   â”‚
â”‚  â”‚ â€¢ user_metadata          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                â”‚ (references)    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   members (Public)       â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ id (UUID)              â”‚   â”‚
â”‚  â”‚ â€¢ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º(FK)
â”‚  â”‚ â€¢ full_name              â”‚   â”‚
â”‚  â”‚ â€¢ email                  â”‚   â”‚
â”‚  â”‚ â€¢ phone                  â”‚   â”‚
â”‚  â”‚ â€¢ join_date              â”‚   â”‚
â”‚  â”‚ â€¢ is_active              â”‚   â”‚
â”‚  â”‚ â€¢ membership_type        â”‚   â”‚
â”‚  â”‚ â€¢ photo_url              â”‚   â”‚
â”‚  â”‚ â€¢ created_at             â”‚   â”‚
â”‚  â”‚ â€¢ updated_at             â”‚   â”‚
â”‚  â”‚                          â”‚   â”‚
â”‚  â”‚ RLS Enabled âœ…           â”‚   â”‚
â”‚  â”‚ Indexes: user_id, active â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚             â”‚ (references)       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   attendance (Public)    â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ â€¢ id (UUID)              â”‚   â”‚
â”‚  â”‚ â€¢ user_id (UUID) â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º(FK)
â”‚  â”‚ â€¢ member_id (UUID) â”€â”€â”€â”€â”€â”€â”¼â”€â”€â–º(FK to members)
â”‚  â”‚ â€¢ member_name            â”‚   â”‚
â”‚  â”‚ â€¢ date                   â”‚   â”‚
â”‚  â”‚ â€¢ time                   â”‚   â”‚
â”‚  â”‚ â€¢ created_at             â”‚   â”‚
â”‚  â”‚                          â”‚   â”‚
â”‚  â”‚ RLS Enabled âœ…           â”‚   â”‚
â”‚  â”‚ Indexes: user_id, member â”‚   â”‚
â”‚  â”‚          id, date        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Adding a Member

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Input Form     â”‚
â”‚ (AddMember Page)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Validation  â”‚
    â”‚ (Frontend)  â”‚
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ addMember() Function      â”‚
â”‚ (MembersContext)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from('members').insert()    â”‚
â”‚ with user_id = auth.user.id          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Insert (PostgreSQL)         â”‚
â”‚ â€¢ RLS Policy checks user_id          â”‚
â”‚ â€¢ Triggers update timestamps         â”‚
â”‚ â€¢ Indexes updated                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Success Response                     â”‚
â”‚ â€¢ Return new member data             â”‚
â”‚ â€¢ Call fetchMembers() to refresh     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Local State                   â”‚
â”‚ â€¢ setMembers() updates cache         â”‚
â”‚ â€¢ UI re-renders with new member      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Success Toast                   â”‚
â”‚ Navigate to /members page            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Marking Attendance

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ User Selects Member      â”‚
â”‚ (MarkAttendance Page)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Click "Mark Attendance"  â”‚
â”‚ Button                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check: Not Already Marked Today â”‚
    â”‚ (todayAttendance filtering)     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
        âœ… OK â”‚ âŒ Already Marked
             â”‚  â”‚
             â–¼  â””â”€â”€â–º Show Error Toast
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ markAttendance() Function      â”‚
â”‚ (MembersContext)              â”‚
â”‚ â€¢ Uses current date/time      â”‚
â”‚ â€¢ Associates with member_id   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ supabase.from('attendance').insert()   â”‚
â”‚ with:                                  â”‚
â”‚ â€¢ user_id = auth.user.id               â”‚
â”‚ â€¢ member_id = selected member          â”‚
â”‚ â€¢ date = TODAY                         â”‚
â”‚ â€¢ time = NOW                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Database Insert (PostgreSQL)           â”‚
â”‚ â€¢ RLS Policy checks user_id            â”‚
â”‚ â€¢ Creates audit trail                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Success Response                       â”‚
â”‚ â€¢ Return attendance record             â”‚
â”‚ â€¢ Call fetchAttendance() to refresh    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Update Local State                     â”‚
â”‚ â€¢ setAttendance() updates cache        â”‚
â”‚ â€¢ Today's list re-renders             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Success Toast                     â”‚
â”‚ Clear form, reset member selection    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Component Hierarchy

```
App.tsx (Routes & Auth Setup)
â”œâ”€â”€ ProtectedRoute (Auth Check)
â”‚   â”œâ”€â”€ Dashboard
â”‚   â”‚   â”œâ”€â”€ DashboardLayout
â”‚   â”‚   â”œâ”€â”€ Stats Cards
â”‚   â”‚   â””â”€â”€ Quick Actions
â”‚   â”‚
â”‚   â”œâ”€â”€ MembersList
â”‚   â”‚   â”œâ”€â”€ DashboardLayout
â”‚   â”‚   â”œâ”€â”€ Search Bar
â”‚   â”‚   â”œâ”€â”€ Filters
â”‚   â”‚   â””â”€â”€ Member Cards
â”‚   â”‚
â”‚   â”œâ”€â”€ AddMember
â”‚   â”‚   â”œâ”€â”€ DashboardLayout
â”‚   â”‚   â””â”€â”€ Member Form
â”‚   â”‚
â”‚   â””â”€â”€ MarkAttendance
â”‚       â”œâ”€â”€ DashboardLayout
â”‚       â”œâ”€â”€ Member Selector
â”‚       â”œâ”€â”€ Today's Check-ins
â”‚       â””â”€â”€ Form
â”‚
â”œâ”€â”€ Login
â”‚   â””â”€â”€ Login Form
â”‚
â””â”€â”€ Signup
    â””â”€â”€ Signup Form
```

## State Management Flow

```
Global State (Context API)
â”‚
â”œâ”€â”€ AuthContext
â”‚   â”œâ”€â”€ user: User | null
â”‚   â”œâ”€â”€ isAuthenticated: boolean
â”‚   â”œâ”€â”€ loading: boolean
â”‚   â”œâ”€â”€ login()
â”‚   â”œâ”€â”€ signup()
â”‚   â””â”€â”€ logout()
â”‚
â””â”€â”€ MembersContext
    â”œâ”€â”€ members: Member[]
    â”œâ”€â”€ attendance: Attendance[]
    â”œâ”€â”€ loading: boolean
    â”œâ”€â”€ addMember()
    â”œâ”€â”€ updateMember()
    â”œâ”€â”€ deleteMember()
    â”œâ”€â”€ markAttendance()
    â”œâ”€â”€ getTodayAttendance()
    â”œâ”€â”€ getActiveMembers()
    â””â”€â”€ getInactiveMembers()
```

## Security & RLS Policies

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Row Level Security (RLS) Enabled     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚
â”œâ”€â”€ Members Table Policies:
â”‚   â”œâ”€â”€ SELECT: Only own members
â”‚   â”‚   WHERE user_id = auth.uid()
â”‚   â”‚
â”‚   â”œâ”€â”€ INSERT: Only own members
â”‚   â”‚   WITH CHECK: user_id = auth.uid()
â”‚   â”‚
â”‚   â”œâ”€â”€ UPDATE: Only own members
â”‚   â”‚   WHERE/WITH: user_id = auth.uid()
â”‚   â”‚
â”‚   â””â”€â”€ DELETE: Only own members
â”‚       WHERE user_id = auth.uid()
â”‚
â””â”€â”€ Attendance Table Policies:
    â”œâ”€â”€ SELECT: Only own records
    â”‚   WHERE user_id = auth.uid()
    â”‚
    â”œâ”€â”€ INSERT: Only own records
    â”‚   WITH CHECK: user_id = auth.uid()
    â”‚
    â””â”€â”€ DELETE: Only own records
        WHERE user_id = auth.uid()
```

## Error Handling Flow

```
API Request
    â”‚
    â”œâ”€â–º âœ… Success
    â”‚   â””â”€â–º Update Local State
    â”‚       â””â”€â–º Show Success Toast
    â”‚           â””â”€â–º Navigate/Refresh
    â”‚
    â””â”€â–º âŒ Error
        â”œâ”€â–º Extract Error Message
        â”‚   â”œâ”€â”€ "Table does not exist"
        â”‚   â”œâ”€â”€ "Unauthorized"
        â”‚   â”œâ”€â”€ "Email already exists"
        â”‚   â””â”€â”€ "Column not found"
        â”‚
        â”œâ”€â–º Log to Console
        â”‚
        â”œâ”€â–º Show Error Toast
        â”‚   â””â”€â”€ Display User-Friendly Message
        â”‚
        â””â”€â–º Don't Update State
            (Keep Previous Data)
```

## Data Validation Pipeline

```
User Input
    â”‚
    â”œâ”€â–º Frontend Validation (React)
    â”‚   â”œâ”€â”€ Required fields check
    â”‚   â”œâ”€â”€ Email format validation
    â”‚   â”œâ”€â”€ Password confirmation
    â”‚   â””â”€â”€ Phone format check
    â”‚
    â”œâ”€â–º API Request to Supabase
    â”‚   â”‚
    â”‚   â””â”€â–º Database Validation (PostgreSQL)
    â”‚       â”œâ”€â”€ Unique constraints
    â”‚       â”œâ”€â”€ Data type validation
    â”‚       â”œâ”€â”€ NOT NULL constraints
    â”‚       â”œâ”€â”€ CHECK constraints
    â”‚       â””â”€â”€ Triggers (timestamps)
    â”‚
    â””â”€â–º Response
        â”œâ”€â–º Success: Store in State
        â””â”€â–º Error: Display Message
```

---

This architecture ensures:
âœ… Security (RLS policies)
âœ… Scalability (Supabase backend)
âœ… Real-time capabilities (Supabase subscriptions)
âœ… User data isolation (Multi-tenant)
âœ… Type safety (TypeScript)
âœ… State consistency (Context API)
